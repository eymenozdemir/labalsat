{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk,createAction}from\"@reduxjs/toolkit\";import uploadService from\"./uploadService\";export var uploadImg=createAsyncThunk(\"upload/images\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data,thunkAPI){var formData,i,_error$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;formData=new FormData();for(i=0;i<data.data.length;i++){formData.append(\"images\",data.data[i]);}_context.next=5;return uploadService.uploadImg(formData,data.config);case 5:return _context.abrupt(\"return\",_context.sent);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(((_error$response=_context.t0.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem(\"customer\");window.location.reload();}return _context.abrupt(\"return\",thunkAPI.rejectWithValue(_context.t0));case 12:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var delImg=createAsyncThunk(\"delete/images\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id,thunkAPI){var _error$response2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return uploadService.deleteImg(id.id,id.config);case 3:return _context2.abrupt(\"return\",id.images.filter(function(i){return i.public_id!==id.id;}));case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);if(((_error$response2=_context2.t0.response)===null||_error$response2===void 0?void 0:_error$response2.status)===401){localStorage.removeItem(\"customer\");window.location.reload();}return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(_context2.t0));case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var resetImg=createAction(\"Reset_all\");var initialState={images:[],isError:false,isLoading:false,isSuccess:false,message:\"\"};export var uploadSlice=createSlice({name:\"imaegs\",initialState:initialState,reducers:{},extraReducers:function extraReducers(builder){builder.addCase(uploadImg.pending,function(state){state.isLoading=true;}).addCase(uploadImg.fulfilled,function(state,action){state.isLoading=false;state.isError=false;state.isSuccess=true;state.images.push(action.payload[0]);}).addCase(uploadImg.rejected,function(state,action){state.isLoading=false;state.isError=true;state.isSuccess=false;state.message=action.error;}).addCase(delImg.pending,function(state){state.isLoading=true;}).addCase(delImg.fulfilled,function(state,action){state.isLoading=false;state.isError=false;state.isSuccess=true;state.images=action.payload;}).addCase(delImg.rejected,function(state,action){state.isLoading=false;state.isError=true;state.isSuccess=false;state.message=\"Something went wrong\";}).addCase(resetImg,function(){return initialState;});}});export default uploadSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","createAction","uploadService","uploadImg","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","thunkAPI","formData","i","_error$response","wrap","_callee$","_context","prev","next","FormData","length","append","config","abrupt","sent","t0","response","status","localStorage","removeItem","window","location","reload","rejectWithValue","stop","_x","_x2","apply","arguments","delImg","_ref2","_callee2","id","_error$response2","_callee2$","_context2","deleteImg","images","filter","public_id","_x3","_x4","resetImg","initialState","isError","isLoading","isSuccess","message","uploadSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","push","payload","rejected","error","reducer"],"sources":["/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-app/src/needed/upload/uploadSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk, createAction } from \"@reduxjs/toolkit\";\nimport uploadService from \"./uploadService\";\n\nexport const uploadImg = createAsyncThunk(\n  \"upload/images\",\n  async (data, thunkAPI) => {\n    try {\n      const formData = new FormData();\n      for (let i = 0; i < data.data.length; i++) {\n        formData.append(\"images\", data.data[i]);\n      }\n      return await uploadService.uploadImg(formData, data.config);\n    } catch (error) {\n      if (error.response?.status===401) {\n        localStorage.removeItem(\"customer\");\n        window.location.reload();\n      }\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\nexport const delImg = createAsyncThunk(\n  \"delete/images\",\n  async (id, thunkAPI) => {\n    //console.log(\"tfisgoinon\", id);\n    try {\n      await uploadService.deleteImg(id.id , id.config);\n      return id.images.filter(i => i.public_id!==id.id);\n    } catch (error) {\n      if (error.response?.status===401) {\n        localStorage.removeItem(\"customer\");\n        window.location.reload();\n      }\n      return thunkAPI.rejectWithValue(error);\n    }\n  }\n);\n\nexport const resetImg = createAction(\"Reset_all\");\n\nconst initialState = {\n  images: [],\n  isError: false,\n  isLoading: false,\n  isSuccess: false,\n  message: \"\",\n};\nexport const uploadSlice = createSlice({\n  name: \"imaegs\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(uploadImg.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(uploadImg.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isError = false;\n        state.isSuccess = true;\n        state.images.push(action.payload[0]);\n      })\n      .addCase(uploadImg.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.isSuccess = false;\n        state.message = action.error;\n      })\n      .addCase(delImg.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(delImg.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isError = false;\n        state.isSuccess = true;\n        state.images = action.payload;\n      })\n      .addCase(delImg.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.isSuccess = false;\n        state.message = \"Something went wrong\";\n      })\n      .addCase(resetImg, () => initialState);\n  },\n});\nexport default uploadSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}