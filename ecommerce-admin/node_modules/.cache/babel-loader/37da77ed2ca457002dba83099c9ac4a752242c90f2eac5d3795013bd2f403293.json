{"ast":null,"code":"import{React,useEffect}from\"react\";import CustomInput from\"../components/CustomInput\";import{useDispatch,useSelector}from\"react-redux\";import{useLocation,useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import*as yup from\"yup\";import{useFormik}from\"formik\";import{createCategory,getAProductCategory,resetState,updateAProductCategory}from\"../features/pcategory/pcategorySlice\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object().shape({title:yup.string().required(\"Category Name is Required\")});var Addcat=function Addcat(){var dispatch=useDispatch();var location=useLocation();var getPCatId=location.pathname.split(\"/\")[3];var navigate=useNavigate();var newCategory=useSelector(function(state){return state.pCategory;});var isSuccess=newCategory.isSuccess,isError=newCategory.isError,isLoading=newCategory.isLoading,createdCategory=newCategory.createdCategory,categoryName=newCategory.categoryName,updatedCategory=newCategory.updatedCategory;//console.log(getPCatId,categoryName);\nuseEffect(function(){if(getPCatId!==undefined){dispatch(getAProductCategory(getPCatId));}else{dispatch(resetState());}},[getPCatId]);useEffect(function(){if(isSuccess&&createdCategory){toast.success(\"Category Added Successfullly!\");}if(isSuccess&&updatedCategory){toast.success(\"Category Updated Successfullly!\");navigate(\"/admin/list-category\");}if(isError){toast.error(\"Something Went Wrong!\");}},[isSuccess,isError,isLoading]);var formik=useFormik({enableReinitialize:true,initialValues:{title:categoryName||\"\"},validationSchema:schema,onSubmit:function onSubmit(values){if(getPCatId!==undefined){var data={id:getPCatId,pCatData:values};dispatch(updateAProductCategory(data));dispatch(resetState());}else{dispatch(createCategory(values));formik.resetForm();setTimeout(function(){dispatch(resetState());},300);}}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"mb-4  title\",children:[getPCatId!==undefined?\"Edit\":\"Add\",\" Category\"]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(CustomInput,{type:\"text\",label:\"Enter Product Category\",onChng:formik.handleChange(\"title\"),onBlr:formik.handleBlur(\"title\"),val:formik.values.title,id:\"brand\"}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:formik.touched.title&&formik.errors.title}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success border-0 rounded-3 my-5\",type:\"submit\",children:[getPCatId!==undefined?\"Edit\":\"Add\",\" Category\"]})]})})]});};export default Addcat;","map":{"version":3,"names":["React","useEffect","CustomInput","useDispatch","useSelector","useLocation","useNavigate","toast","yup","useFormik","createCategory","getAProductCategory","resetState","updateAProductCategory","jsxs","_jsxs","jsx","_jsx","schema","object","shape","title","string","required","Addcat","dispatch","location","getPCatId","pathname","split","navigate","newCategory","state","pCategory","isSuccess","isError","isLoading","createdCategory","categoryName","updatedCategory","undefined","success","error","formik","enableReinitialize","initialValues","validationSchema","onSubmit","values","data","id","pCatData","resetForm","setTimeout","children","className","action","handleSubmit","type","label","onChng","handleChange","onBlr","handleBlur","val","touched","errors"],"sources":["/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-admin/src/pages/Addcat.js"],"sourcesContent":["import { React, useEffect } from \"react\";\nimport CustomInput from \"../components/CustomInput\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport * as yup from \"yup\";\nimport { useFormik } from \"formik\";\nimport {\n  createCategory,\n  getAProductCategory,\n  resetState,\n  updateAProductCategory,\n} from \"../features/pcategory/pcategorySlice\";\nlet schema = yup.object().shape({\n  title: yup.string().required(\"Category Name is Required\"),\n});\nconst Addcat = () => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const getPCatId = location.pathname.split(\"/\")[3];\n  const navigate = useNavigate();\n  const newCategory = useSelector((state) => state.pCategory);\n  const {\n    isSuccess,\n    isError,\n    isLoading,\n    createdCategory,\n    categoryName,\n    updatedCategory,\n  } = newCategory;\n  //console.log(getPCatId,categoryName);\n  useEffect(() => {\n    if (getPCatId !== undefined) {\n      dispatch(getAProductCategory(getPCatId));\n    } else {\n      dispatch(resetState());\n    }\n  }, [getPCatId]);\n  useEffect(() => {\n    if (isSuccess && createdCategory) {\n      toast.success(\"Category Added Successfullly!\");\n    }\n    if (isSuccess && updatedCategory) {\n      toast.success(\"Category Updated Successfullly!\");\n      navigate(\"/admin/list-category\");\n    }\n    if (isError) {\n      toast.error(\"Something Went Wrong!\");\n    }\n  }, [isSuccess, isError, isLoading]);\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues: {\n      title: categoryName || \"\",\n    },\n    validationSchema: schema,\n    onSubmit: (values) => {\n      if (getPCatId !== undefined) {\n        const data = { id: getPCatId, pCatData: values };\n        dispatch(updateAProductCategory(data));\n        dispatch(resetState());\n      } else {\n        dispatch(createCategory(values));\n        formik.resetForm();\n        setTimeout(() => {\n          dispatch(resetState());\n        }, 300);\n      }\n    },\n  });\n  return (\n    <div>\n      <h3 className=\"mb-4  title\">\n        {getPCatId !== undefined ? \"Edit\" : \"Add\"} Category\n      </h3>\n      <div>\n        <form action=\"\" onSubmit={formik.handleSubmit}>\n          <CustomInput\n            type=\"text\"\n            label=\"Enter Product Category\"\n            onChng={formik.handleChange(\"title\")}\n            onBlr={formik.handleBlur(\"title\")}\n            val={formik.values.title}\n            id=\"brand\"\n          />\n          <div className=\"error\">\n            {formik.touched.title && formik.errors.title}\n          </div>\n          <button\n            className=\"btn btn-success border-0 rounded-3 my-5\"\n            type=\"submit\"\n          >\n            {getPCatId !== undefined ? \"Edit\" : \"Add\"} Category\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Addcat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}