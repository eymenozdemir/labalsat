{"ast":null,"code":"import _slicedToArray from\"/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Table}from\"antd\";import{useDispatch,useSelector}from\"react-redux\";import{BiEdit}from\"react-icons/bi\";import{AiFillDelete}from\"react-icons/ai\";import{Link}from\"react-router-dom\";import{getOrders,deleteAnOrder}from\"../features/auth/authSlice\";import CustomModal from\"../components/CustomModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var columns=[{title:\"SNo\",dataIndex:\"key\"},{title:\"Name\",dataIndex:\"name\"},{title:\"Email\",dataIndex:\"email\"},{title:\"Mobile\",dataIndex:\"mobile\"},{title:\"Address\",dataIndex:\"address\"},{title:\"Product\",dataIndex:\"product\"},{title:\"Date\",dataIndex:\"date\"},{title:\"Action\",dataIndex:\"action\"}];var Orders=function Orders(){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),orderId=_useState4[0],setOrderId=_useState4[1];var showModal=function showModal(e){setOpen(true);setOrderId(e);};var hideModal=function hideModal(){setOpen(false);};useEffect(function(){if(localStorage.getItem(\"fromLogin\")===\"true\"){//console.log(\"ahasadasa\", localStorage.getItem(\"fromLogin\"));\nlocalStorage.setItem(\"fromLogin\",false);setTimeout(function(){window.location.reload();},300);}},[]);useEffect(function(){dispatch(getOrders());},[]);var orderState=useSelector(function(state){return state.auth.orders;});var data1=[];var _loop=function _loop(i){var _orderState$i$shippin,_orderState$i$shippin2,_orderState$i$shippin3,_orderState$i$shippin4,_orderState$i$shippin5;var tempLink=\"https://www.labalsat.com/product/\".concat(orderState[i].orderedItems[0].product);data1.push({key:i+1,name:orderState[i].user.firstname+\" \"+orderState[i].user.lastname,email:orderState[i].user.email,mobile:orderState[i].user.mobile,address:((_orderState$i$shippin=orderState[i].shippingInfo)===null||_orderState$i$shippin===void 0?void 0:_orderState$i$shippin.address)+\" \"+((_orderState$i$shippin2=orderState[i].shippingInfo)===null||_orderState$i$shippin2===void 0?void 0:_orderState$i$shippin2.other)+\" \"+((_orderState$i$shippin3=orderState[i].shippingInfo)===null||_orderState$i$shippin3===void 0?void 0:_orderState$i$shippin3.city)+\" \"+((_orderState$i$shippin4=orderState[i].shippingInfo)===null||_orderState$i$shippin4===void 0?void 0:_orderState$i$shippin4.country)+\" \"+((_orderState$i$shippin5=orderState[i].shippingInfo)===null||_orderState$i$shippin5===void 0?void 0:_orderState$i$shippin5.pincode),product:/*#__PURE__*/_jsx(\"a\",{href:tempLink,target:\"_blank\",rel:\"noreferrer noopener\",children:/*#__PURE__*/_jsx(\"p\",{children:orderState[i].orderedItems[0].product.substr(orderState[i].orderedItems[0].product.length-6)})}),date:new Date(orderState[i].createdAt).toLocaleString(),action:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"ms-3 fs-3 text-danger bg-transparent border-0\",onClick:function onClick(){return showModal(orderState[i]._id);},children:/*#__PURE__*/_jsx(AiFillDelete,{})})})});};for(var i=0;i<orderState.length;i++){_loop(i);};var deleteOrder=function deleteOrder(e){dispatch(deleteAnOrder(e));setOpen(false);setTimeout(function(){dispatch(getOrders());},100);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4 title\",children:\"Orders\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:data1})}),/*#__PURE__*/_jsx(CustomModal,{hideModal:hideModal,open:open,performAction:function performAction(){deleteOrder(orderId);},title:\"Are you sure you want to delete this Order ?\"})]});};export default Orders;","map":{"version":3,"names":["React","useEffect","useState","Table","useDispatch","useSelector","BiEdit","AiFillDelete","Link","getOrders","deleteAnOrder","CustomModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","columns","title","dataIndex","Orders","dispatch","_useState","_useState2","_slicedToArray","open","setOpen","_useState3","_useState4","orderId","setOrderId","showModal","e","hideModal","localStorage","getItem","setItem","setTimeout","window","location","reload","orderState","state","auth","orders","data1","_loop","i","_orderState$i$shippin","_orderState$i$shippin2","_orderState$i$shippin3","_orderState$i$shippin4","_orderState$i$shippin5","tempLink","concat","orderedItems","product","push","key","name","user","firstname","lastname","email","mobile","address","shippingInfo","other","city","country","pincode","href","target","rel","children","substr","length","date","Date","createdAt","toLocaleString","action","className","onClick","_id","deleteOrder","dataSource","performAction"],"sources":["/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-admin/src/pages/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Table } from \"antd\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { BiEdit } from \"react-icons/bi\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { Link } from \"react-router-dom\";\nimport { getOrders, deleteAnOrder } from \"../features/auth/authSlice\";\nimport CustomModal from \"../components/CustomModal\";\nconst columns = [\n  {\n    title: \"SNo\",\n    dataIndex: \"key\",\n  },\n  {\n    title: \"Name\",\n    dataIndex: \"name\",\n  },\n  {\n    title: \"Email\",\n    dataIndex: \"email\",\n  },\n  {\n    title: \"Mobile\",\n    dataIndex: \"mobile\",\n  },\n  {\n    title: \"Address\",\n    dataIndex: \"address\",\n  },\n  {\n    title: \"Product\",\n    dataIndex: \"product\",\n  },\n  {\n    title: \"Date\",\n    dataIndex: \"date\",\n  },\n\n  {\n    title: \"Action\",\n    dataIndex: \"action\",\n  },\n];\n\n  \n\nconst Orders = () => {\n  \n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n  const [orderId, setOrderId] = useState(\"\");\n  const showModal = (e) => {\n    setOpen(true);\n    setOrderId(e);\n  };\n\n  const hideModal = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    if(localStorage.getItem(\"fromLogin\") === \"true\"){\n      //console.log(\"ahasadasa\", localStorage.getItem(\"fromLogin\"));\n      localStorage.setItem(\"fromLogin\", false);\n      setTimeout(() => {\n        window.location.reload();\n      }, 300);\n    }\n  }, []);\n\n  useEffect(() => {\n    dispatch(getOrders());\n  }, []);\n  const orderState = useSelector((state) => state.auth.orders);\n\n  const data1 = [];\n  for (let i = 0; i < orderState.length; i++) {\n    let tempLink = `https://www.labalsat.com/product/${orderState[i].orderedItems[0].product}`;\n    data1.push({\n      key: i + 1,\n      name: orderState[i].user.firstname +\" \"+ orderState[i].user.lastname,\n      email: orderState[i].user.email,\n      mobile: orderState[i].user.mobile,\n      address: orderState[i].shippingInfo?.address +\" \"+ orderState[i].shippingInfo?.other +\" \"+ orderState[i].shippingInfo?.city +\" \"+ orderState[i].shippingInfo?.country +\" \"+ orderState[i].shippingInfo?.pincode,\n      product: (\n        <a href={tempLink} target=\"_blank\" rel=\"noreferrer noopener\">\n          <p>{orderState[i].orderedItems[0].product.substr(orderState[i].orderedItems[0].product.length - 6)}</p>\n        </a>\n      ),\n      date: new Date(orderState[i].createdAt).toLocaleString(),\n      action: (\n        <>\n          <button\n            className=\"ms-3 fs-3 text-danger bg-transparent border-0\"\n            onClick={() => showModal(orderState[i]._id)}\n          >\n            <AiFillDelete />\n          </button>\n        </>\n      ),\n    });\n  };\n\n  const deleteOrder = (e) => {\n    dispatch(deleteAnOrder(e));\n    setOpen(false);\n    setTimeout(() => {\n      dispatch(getOrders());\n    }, 100);\n  };\n\n  return (\n    <div>\n      <h3 className=\"mb-4 title\">Orders</h3>\n      <div>{<Table columns={columns} dataSource={data1} />}</div>\n      <CustomModal\n        hideModal={hideModal}\n        open={open}\n        performAction={() => {\n          deleteOrder(orderId);\n        }}\n        title=\"Are you sure you want to delete this Order ?\"\n      />\n    </div>\n  );\n};\n\nexport default Orders;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}