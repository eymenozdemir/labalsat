{"ast":null,"code":"import _slicedToArray from\"/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useEffect,useState}from\"react\";import CustomInput from\"../components/CustomInput\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate,useLocation}from\"react-router-dom\";import{toast}from\"react-toastify\";import*as yup from\"yup\";import{useFormik}from\"formik\";import{createCoupon,getACoupon,resetState,updateACoupon}from\"../features/coupon/couponSlice\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object().shape({name:yup.string().required(\"Coupon Name is Required\"),expiry:yup.date().required(\"Expiry Date is Required\"),discount:yup.number().required(\"Discount Percentage is Required\")});var AddCoupon=function AddCoupon(){var dispatch=useDispatch();var location=useLocation();var navigate=useNavigate();var getCouponId=location.pathname.split(\"/\")[3];var newCoupon=useSelector(function(state){return state.coupon;});var isSuccess=newCoupon.isSuccess,isError=newCoupon.isError,isLoading=newCoupon.isLoading,createdCoupon=newCoupon.createdCoupon,couponName=newCoupon.couponName,couponDiscount=newCoupon.couponDiscount,couponExpiry=newCoupon.couponExpiry,updatedCoupon=newCoupon.updatedCoupon;var changeDateFormet=function changeDateFormet(date){var newDate=new Date(date).toLocaleDateString();var _newDate$split=newDate.split(\"/\"),_newDate$split2=_slicedToArray(_newDate$split,3),month=_newDate$split2[0],day=_newDate$split2[1],year=_newDate$split2[2];return[year,month,day].join(\"-\");};useEffect(function(){if(getCouponId!==undefined){dispatch(getACoupon(getCouponId));}else{dispatch(resetState());}},[getCouponId]);useEffect(function(){if(isSuccess&&createdCoupon){toast.success(\"Coupon Added Successfullly!\");}if(isSuccess&&updatedCoupon){toast.success(\"Coupon Updated Successfullly!\");navigate(\"/admin/coupon-list\");}if(isError&&couponName&&couponDiscount&&couponExpiry){toast.error(\"Something Went Wrong!\");}},[isSuccess,isError,isLoading]);var formik=useFormik({enableReinitialize:true,initialValues:{name:couponName||\"\",expiry:changeDateFormet(couponExpiry)||\"\",discount:couponDiscount||\"\"},validationSchema:schema,onSubmit:function onSubmit(values){if(getCouponId!==undefined){var data={id:getCouponId,couponData:values};dispatch(updateACoupon(data));dispatch(resetState());}else{dispatch(createCoupon(values));formik.resetForm();setTimeout(function(){dispatch(resetState);},300);}}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"mb-4 title\",children:[getCouponId!==undefined?\"Edit\":\"Add\",\" Coupon\"]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(CustomInput,{type:\"text\",name:\"name\",onChng:formik.handleChange(\"name\"),onBlr:formik.handleBlur(\"name\"),val:formik.values.name,label:\"Enter Coupon Name\",id:\"name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:formik.touched.name&&formik.errors.name}),/*#__PURE__*/_jsx(CustomInput,{type:\"date\",name:\"expiry\",onChng:formik.handleChange(\"expiry\"),onBlr:formik.handleBlur(\"expiry\"),val:formik.values.expiry,label:\"Enter Expiry Data\",id:\"date\"}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:formik.touched.expiry&&formik.errors.expiry}),/*#__PURE__*/_jsx(CustomInput,{type:\"number\",name:\"discount\",onChng:formik.handleChange(\"discount\"),onBlr:formik.handleBlur(\"discount\"),val:formik.values.discount,label:\"Enter Discount\",id:\"discount\"}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:formik.touched.discount&&formik.errors.discount}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success border-0 rounded-3 my-5\",type:\"submit\",children:[getCouponId!==undefined?\"Edit\":\"Add\",\" Coupon\"]})]})})]});};export default AddCoupon;","map":{"version":3,"names":["React","useEffect","useState","CustomInput","useDispatch","useSelector","useNavigate","useLocation","toast","yup","useFormik","createCoupon","getACoupon","resetState","updateACoupon","jsxs","_jsxs","jsx","_jsx","schema","object","shape","name","string","required","expiry","date","discount","number","AddCoupon","dispatch","location","navigate","getCouponId","pathname","split","newCoupon","state","coupon","isSuccess","isError","isLoading","createdCoupon","couponName","couponDiscount","couponExpiry","updatedCoupon","changeDateFormet","newDate","Date","toLocaleDateString","_newDate$split","_newDate$split2","_slicedToArray","month","day","year","join","undefined","success","error","formik","enableReinitialize","initialValues","validationSchema","onSubmit","values","data","id","couponData","resetForm","setTimeout","children","className","action","handleSubmit","type","onChng","handleChange","onBlr","handleBlur","val","label","touched","errors"],"sources":["/Users/eymenozdemir/Desktop/HARMONI/labalsat/ecommerce-admin/src/pages/AddCoupon.js"],"sourcesContent":["import { React, useEffect, useState } from \"react\";\nimport CustomInput from \"../components/CustomInput\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport * as yup from \"yup\";\nimport { useFormik } from \"formik\";\nimport {\n  createCoupon,\n  getACoupon,\n  resetState,\n  updateACoupon,\n} from \"../features/coupon/couponSlice\";\n\nlet schema = yup.object().shape({\n  name: yup.string().required(\"Coupon Name is Required\"),\n  expiry: yup.date().required(\"Expiry Date is Required\"),\n  discount: yup.number().required(\"Discount Percentage is Required\"),\n});\nconst AddCoupon = () => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const getCouponId = location.pathname.split(\"/\")[3];\n  const newCoupon = useSelector((state) => state.coupon);\n\n  const {\n    isSuccess,\n    isError,\n    isLoading,\n    createdCoupon,\n    couponName,\n    couponDiscount,\n    couponExpiry,\n    updatedCoupon,\n  } = newCoupon;\n  const changeDateFormet = (date) => {\n    const newDate = new Date(date).toLocaleDateString();\n    const [month, day, year] = newDate.split(\"/\");\n    return [year, month, day].join(\"-\");\n  };\n\n  useEffect(() => {\n    if (getCouponId !== undefined) {\n      dispatch(getACoupon(getCouponId));\n    } else {\n      dispatch(resetState());\n    }\n  }, [getCouponId]);\n\n  useEffect(() => {\n    if (isSuccess && createdCoupon) {\n      toast.success(\"Coupon Added Successfullly!\");\n    }\n    if (isSuccess && updatedCoupon) {\n      toast.success(\"Coupon Updated Successfullly!\");\n      navigate(\"/admin/coupon-list\");\n    }\n    if (isError && couponName && couponDiscount && couponExpiry) {\n      toast.error(\"Something Went Wrong!\");\n    }\n  }, [isSuccess, isError, isLoading]);\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues: {\n      name: couponName || \"\",\n      expiry: changeDateFormet(couponExpiry) || \"\",\n      discount: couponDiscount || \"\",\n    },\n    validationSchema: schema,\n    onSubmit: (values) => {\n      if (getCouponId !== undefined) {\n        const data = { id: getCouponId, couponData: values };\n        dispatch(updateACoupon(data));\n        dispatch(resetState());\n      } else {\n        dispatch(createCoupon(values));\n        formik.resetForm();\n        setTimeout(() => {\n          dispatch(resetState);\n        }, 300);\n      }\n    },\n  });\n\n  return (\n    <div>\n      <h3 className=\"mb-4 title\">\n        {getCouponId !== undefined ? \"Edit\" : \"Add\"} Coupon\n      </h3>\n      <div>\n        <form action=\"\" onSubmit={formik.handleSubmit}>\n          <CustomInput\n            type=\"text\"\n            name=\"name\"\n            onChng={formik.handleChange(\"name\")}\n            onBlr={formik.handleBlur(\"name\")}\n            val={formik.values.name}\n            label=\"Enter Coupon Name\"\n            id=\"name\"\n          />\n          <div className=\"error\">\n            {formik.touched.name && formik.errors.name}\n          </div>\n          <CustomInput\n            type=\"date\"\n            name=\"expiry\"\n            onChng={formik.handleChange(\"expiry\")}\n            onBlr={formik.handleBlur(\"expiry\")}\n            val={formik.values.expiry}\n            label=\"Enter Expiry Data\"\n            id=\"date\"\n          />\n          <div className=\"error\">\n            {formik.touched.expiry && formik.errors.expiry}\n          </div>\n          <CustomInput\n            type=\"number\"\n            name=\"discount\"\n            onChng={formik.handleChange(\"discount\")}\n            onBlr={formik.handleBlur(\"discount\")}\n            val={formik.values.discount}\n            label=\"Enter Discount\"\n            id=\"discount\"\n          />\n          <div className=\"error\">\n            {formik.touched.discount && formik.errors.discount}\n          </div>\n          <button\n            className=\"btn btn-success border-0 rounded-3 my-5\"\n            type=\"submit\"\n          >\n            {getCouponId !== undefined ? \"Edit\" : \"Add\"} Coupon\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AddCoupon;\n"],"mappings":"kJAAA,OAASA,KAAK,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAC1B,OAASC,SAAS,KAAQ,QAAQ,CAClC,OACEC,YAAY,CACZC,UAAU,CACVC,UAAU,CACVC,aAAa,KACR,gCAAgC,CAAC,OAAAC,IAAA,IAAAC,KAAA,gCAAAC,GAAA,IAAAC,IAAA,yBAExC,GAAI,CAAAC,MAAM,CAAGV,GAAG,CAACW,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC,CAC9BC,IAAI,CAAEb,GAAG,CAACc,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,yBAAyB,CAAC,CACtDC,MAAM,CAAEhB,GAAG,CAACiB,IAAI,CAAC,CAAC,CAACF,QAAQ,CAAC,yBAAyB,CAAC,CACtDG,QAAQ,CAAElB,GAAG,CAACmB,MAAM,CAAC,CAAC,CAACJ,QAAQ,CAAC,iCAAiC,CACnE,CAAC,CAAC,CACF,GAAM,CAAAK,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,GAAM,CAAAC,QAAQ,CAAG1B,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAA2B,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAyB,QAAQ,CAAG1B,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAA2B,WAAW,CAAGF,QAAQ,CAACG,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACnD,GAAM,CAAAC,SAAS,CAAG/B,WAAW,CAAC,SAACgC,KAAK,QAAK,CAAAA,KAAK,CAACC,MAAM,GAAC,CAEtD,GACE,CAAAC,SAAS,CAQPH,SAAS,CARXG,SAAS,CACTC,OAAO,CAOLJ,SAAS,CAPXI,OAAO,CACPC,SAAS,CAMPL,SAAS,CANXK,SAAS,CACTC,aAAa,CAKXN,SAAS,CALXM,aAAa,CACbC,UAAU,CAIRP,SAAS,CAJXO,UAAU,CACVC,cAAc,CAGZR,SAAS,CAHXQ,cAAc,CACdC,YAAY,CAEVT,SAAS,CAFXS,YAAY,CACZC,aAAa,CACXV,SAAS,CADXU,aAAa,CAEf,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIrB,IAAI,CAAK,CACjC,GAAM,CAAAsB,OAAO,CAAG,GAAI,CAAAC,IAAI,CAACvB,IAAI,CAAC,CAACwB,kBAAkB,CAAC,CAAC,CACnD,IAAAC,cAAA,CAA2BH,OAAO,CAACb,KAAK,CAAC,GAAG,CAAC,CAAAiB,eAAA,CAAAC,cAAA,CAAAF,cAAA,IAAtCG,KAAK,CAAAF,eAAA,IAAEG,GAAG,CAAAH,eAAA,IAAEI,IAAI,CAAAJ,eAAA,IACvB,MAAO,CAACI,IAAI,CAAEF,KAAK,CAAEC,GAAG,CAAC,CAACE,IAAI,CAAC,GAAG,CAAC,CACrC,CAAC,CAEDxD,SAAS,CAAC,UAAM,CACd,GAAIgC,WAAW,GAAKyB,SAAS,CAAE,CAC7B5B,QAAQ,CAAClB,UAAU,CAACqB,WAAW,CAAC,CAAC,CACnC,CAAC,IAAM,CACLH,QAAQ,CAACjB,UAAU,CAAC,CAAC,CAAC,CACxB,CACF,CAAC,CAAE,CAACoB,WAAW,CAAC,CAAC,CAEjBhC,SAAS,CAAC,UAAM,CACd,GAAIsC,SAAS,EAAIG,aAAa,CAAE,CAC9BlC,KAAK,CAACmD,OAAO,CAAC,6BAA6B,CAAC,CAC9C,CACA,GAAIpB,SAAS,EAAIO,aAAa,CAAE,CAC9BtC,KAAK,CAACmD,OAAO,CAAC,+BAA+B,CAAC,CAC9C3B,QAAQ,CAAC,oBAAoB,CAAC,CAChC,CACA,GAAIQ,OAAO,EAAIG,UAAU,EAAIC,cAAc,EAAIC,YAAY,CAAE,CAC3DrC,KAAK,CAACoD,KAAK,CAAC,uBAAuB,CAAC,CACtC,CACF,CAAC,CAAE,CAACrB,SAAS,CAAEC,OAAO,CAAEC,SAAS,CAAC,CAAC,CACnC,GAAM,CAAAoB,MAAM,CAAGnD,SAAS,CAAC,CACvBoD,kBAAkB,CAAE,IAAI,CACxBC,aAAa,CAAE,CACbzC,IAAI,CAAEqB,UAAU,EAAI,EAAE,CACtBlB,MAAM,CAAEsB,gBAAgB,CAACF,YAAY,CAAC,EAAI,EAAE,CAC5ClB,QAAQ,CAAEiB,cAAc,EAAI,EAC9B,CAAC,CACDoB,gBAAgB,CAAE7C,MAAM,CACxB8C,QAAQ,CAAE,SAAAA,SAACC,MAAM,CAAK,CACpB,GAAIjC,WAAW,GAAKyB,SAAS,CAAE,CAC7B,GAAM,CAAAS,IAAI,CAAG,CAAEC,EAAE,CAAEnC,WAAW,CAAEoC,UAAU,CAAEH,MAAO,CAAC,CACpDpC,QAAQ,CAAChB,aAAa,CAACqD,IAAI,CAAC,CAAC,CAC7BrC,QAAQ,CAACjB,UAAU,CAAC,CAAC,CAAC,CACxB,CAAC,IAAM,CACLiB,QAAQ,CAACnB,YAAY,CAACuD,MAAM,CAAC,CAAC,CAC9BL,MAAM,CAACS,SAAS,CAAC,CAAC,CAClBC,UAAU,CAAC,UAAM,CACfzC,QAAQ,CAACjB,UAAU,CAAC,CACtB,CAAC,CAAE,GAAG,CAAC,CACT,CACF,CACF,CAAC,CAAC,CAEF,mBACEG,KAAA,QAAAwD,QAAA,eACExD,KAAA,OAAIyD,SAAS,CAAC,YAAY,CAAAD,QAAA,EACvBvC,WAAW,GAAKyB,SAAS,CAAG,MAAM,CAAG,KAAK,CAAC,SAC9C,EAAI,CAAC,cACLxC,IAAA,QAAAsD,QAAA,cACExD,KAAA,SAAM0D,MAAM,CAAC,EAAE,CAACT,QAAQ,CAAEJ,MAAM,CAACc,YAAa,CAAAH,QAAA,eAC5CtD,IAAA,CAACf,WAAW,EACVyE,IAAI,CAAC,MAAM,CACXtD,IAAI,CAAC,MAAM,CACXuD,MAAM,CAAEhB,MAAM,CAACiB,YAAY,CAAC,MAAM,CAAE,CACpCC,KAAK,CAAElB,MAAM,CAACmB,UAAU,CAAC,MAAM,CAAE,CACjCC,GAAG,CAAEpB,MAAM,CAACK,MAAM,CAAC5C,IAAK,CACxB4D,KAAK,CAAC,mBAAmB,CACzBd,EAAE,CAAC,MAAM,CACV,CAAC,cACFlD,IAAA,QAAKuD,SAAS,CAAC,OAAO,CAAAD,QAAA,CACnBX,MAAM,CAACsB,OAAO,CAAC7D,IAAI,EAAIuC,MAAM,CAACuB,MAAM,CAAC9D,IAAI,CACvC,CAAC,cACNJ,IAAA,CAACf,WAAW,EACVyE,IAAI,CAAC,MAAM,CACXtD,IAAI,CAAC,QAAQ,CACbuD,MAAM,CAAEhB,MAAM,CAACiB,YAAY,CAAC,QAAQ,CAAE,CACtCC,KAAK,CAAElB,MAAM,CAACmB,UAAU,CAAC,QAAQ,CAAE,CACnCC,GAAG,CAAEpB,MAAM,CAACK,MAAM,CAACzC,MAAO,CAC1ByD,KAAK,CAAC,mBAAmB,CACzBd,EAAE,CAAC,MAAM,CACV,CAAC,cACFlD,IAAA,QAAKuD,SAAS,CAAC,OAAO,CAAAD,QAAA,CACnBX,MAAM,CAACsB,OAAO,CAAC1D,MAAM,EAAIoC,MAAM,CAACuB,MAAM,CAAC3D,MAAM,CAC3C,CAAC,cACNP,IAAA,CAACf,WAAW,EACVyE,IAAI,CAAC,QAAQ,CACbtD,IAAI,CAAC,UAAU,CACfuD,MAAM,CAAEhB,MAAM,CAACiB,YAAY,CAAC,UAAU,CAAE,CACxCC,KAAK,CAAElB,MAAM,CAACmB,UAAU,CAAC,UAAU,CAAE,CACrCC,GAAG,CAAEpB,MAAM,CAACK,MAAM,CAACvC,QAAS,CAC5BuD,KAAK,CAAC,gBAAgB,CACtBd,EAAE,CAAC,UAAU,CACd,CAAC,cACFlD,IAAA,QAAKuD,SAAS,CAAC,OAAO,CAAAD,QAAA,CACnBX,MAAM,CAACsB,OAAO,CAACxD,QAAQ,EAAIkC,MAAM,CAACuB,MAAM,CAACzD,QAAQ,CAC/C,CAAC,cACNX,KAAA,WACEyD,SAAS,CAAC,yCAAyC,CACnDG,IAAI,CAAC,QAAQ,CAAAJ,QAAA,EAEZvC,WAAW,GAAKyB,SAAS,CAAG,MAAM,CAAG,KAAK,CAAC,SAC9C,EAAQ,CAAC,EACL,CAAC,CACJ,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}